<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>CMS</title>
  <!-- Load CSS first -->
  <link rel="stylesheet" href="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.css">
  <!-- Preload JS -->
  <link rel="preload" href="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js" as="script">
</head>
<body>
  <!-- Mount point -->
  <div id="cms-root"></div>

  <!-- Load script with defer -->
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js" defer></script>

  <!-- Safe initialization -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Wait for CMS to be fully loaded
      function waitForCMS() {
        if (window.CMS && window.CMS.registerBackend) {
          CMS.init({
            config: {
              backend: {
                name: "github",
                repo: "khaleeqrehman/portfolio-v2",
                branch: "main"
              },
              media_folder: "static/images/uploads",
              public_folder: "/images/uploads",
              collections: [ /* your collections */ ]
            }
          });
        } else {
          setTimeout(waitForCMS, 100);
        }
      }
      waitForCMS();
    });
  </script>
</body>
</html>